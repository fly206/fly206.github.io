---
title: iw 命令编译
author: fly206
date: 2022-03-24 22:05:53.546048+08:00
categories: [Blogging, Linux]
tags: [rootfs]
math: true
mermaid: true
---

## iw 命令编译--交叉编译
### 准备工作

#### 移植libnl
下载:[源码](http://www.infradead.org/~tgr/libnl/files/)

```
configure:

./configure --prefix=/run/media/fly/rootfs --target=arm-linux-gnueabihf --host=arm-linux-gnueabihf --build=x86_64-linux-gnu CC=arm-linux-gnueabihf-gcc AR=arm-linux-gnueabihf-ar
```
或
```
./configure --host=arm-linux-gnueabihf --build=armv7l --prefix=/run/media/fly/rootfs
```
编译安装:
```
make & make install
```
#### 移植iw

下载:[源码](https://mirrors.edge.kernel.org/pub/software/network/iw/)

添加环境(目录为libnl安装目录lib及其下的pkgconfig目录):
```
export PKG_CONFIG_PATH=/home/xy/work/lib/pkgconfig:$PKG_CONFIG_PATH 
```
修改Makefile:

在iw下添加-lpthread -lm避免未定义错误

编译安装:
```
make CC=arm-linux-gnueabihf-gcc
make install
```

### 简单使用

| 命令 | 说明 |
| ----------- | ----------- |
| iw help | 查看帮助 |
| iw dev wlan0 scan | 扫描 |
| iw dev wlan0 link | 查看连接信息 |
| iw wlan0 connect foo | 连接到未加密的ap |
| iw wlan0 connect foo keys 0:abcde d:1:0011223344 | 连接到wep加密的ap |

> 连接wpa2加密wifi使用wpa_supplicant

